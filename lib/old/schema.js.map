{"version":3,"sources":["../../src/old/schema.es6"],"names":[],"mappings":";;AAAA,AAAC,CAAA,YAAY;AACZ,aAAY,CAAC;;AAEb,KAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,KAAI,CAAC,GAAI,OAAO,CAAC,YAAY,CAAC,CAAC;;AAE/B,OAAM,YAAY,CAAC;AAClB,MAAI,CAAC,UAAU,EAAE;AAChB,OAAI,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;;AAEzC,OAAI,MAAM,EAAE;AACX,WAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC1B;;AAED,UAAO,IAAI,CAAC;GACZ;;AAED,UAAQ,CAAC,MAAM,EAAE;;;AAGhB,OAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,OAAI,MAAM,GAAG,SAAT,MAAM,CAAa,KAAK,EAAE,MAAM,EAAE;AACrC,KAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE,GAAG,EAAE;AAClC,SAAI,IAAI,CAAC,UAAU,EAAE;AACpB,YAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;MACjB;;AAED,SAAI,IAAI,WAAQ,EAAE;AACjB,UAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,WAAQ,CAAC,IAAI,IAAI,WAAQ,CAAC,IAAI,EAAE;;AAElD,aAAM,CAAC,GAAG,CAAC,GAAG,IAAI,WAAQ,CAAC,KAAK,GAC7B,MAAM,CAAC,IAAI,WAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,WAAQ,CAAC,KAAK,CAAC,GAC7C,MAAM,CAAC,IAAI,WAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;OAE/B,MAAM,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,WAAQ,CAAC,EAAE;AACpC,aAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,OAAO,CAAC,IAAI,WAAQ,CAAC,GACvD,IAAI,GACJ,MAAM,CAAC,IAAI,WAAQ,CAAC,EAAE,CAAC;OAC1B;MACD;;AAED,SAAI,IAAI,CAAC,UAAU,EAAE;AACpB,YAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;MACrC;KACD,CAAC,CAAC;IACH,CAAC;;AAEF,SAAM,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;;;;AAIlC,UAAO,MAAM,CAAC;GACd;EACD;;AAED,OAAM,CAAC,OAAO,GAAG,YAAY,CAAC;CAC9B,CAAA,EAAE,CAAE","file":"schema.js","sourcesContent":["(function () {\n\t\"use strict\";\n\n\tvar fs = require('fs');\n\tvar _  = require('underscore');\n\n\tclass SchemaLoader {\n\t\tload(schemaPath) {\n\t\t\tvar schema = fs.readFileSync(schemaPath);\n\n\t\t\tif (schema) {\n\t\t\t\treturn JSON.parse(schema);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\tdefaults(schema) {\n\t\t\t//console.time('defaults');\n\n\t\t\tvar output = {};\n\n\t\t\tvar walker = function (props, output) {\n\t\t\t\t_.each(props, function (prop, key) {\n\t\t\t\t\tif (prop.properties) {\n\t\t\t\t\t\toutput[key] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (prop.default) {\n\t\t\t\t\t\tif (_.isObject(prop.default) && prop.default.type) {\n\n\t\t\t\t\t\t\toutput[key] = prop.default.value\n\t\t\t\t\t\t\t\t? global[prop.default.type](prop.default.value)\n\t\t\t\t\t\t\t\t: global[prop.default.type]();\n\n\t\t\t\t\t\t} else if (_.isString(prop.default)) {\n\t\t\t\t\t\t\toutput[key] = ~['null', 'undefined'].indexOf(prop.default)\n\t\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t\t: global[prop.default]();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (prop.properties) {\n\t\t\t\t\t\twalker(prop.properties, output[key]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\twalker(schema.properties, output);\n\n\t\t\t//console.timeEnd('defaults');\n\n\t\t\treturn output;\n\t\t}\n\t}\n\n\tmodule.exports = SchemaLoader;\n}());"]}