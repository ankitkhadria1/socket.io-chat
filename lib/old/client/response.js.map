{"version":3,"sources":["../../../src/old/client/response.es6"],"names":[],"mappings":"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","file":"response.js","sourcesContent":["export function Create(client, options) {\n\tlet members = client.members.get(options.chat.get('members'));\n\n\tclient.rooms.addMembers(options.chat.get('_id'), members);\n\tclient.members.forEach((socket) => {\n\t\tthis.emitResult(socket, client.EVENT.JOIN, {\n\t\t\tmessage: 'Join to chat',\n\t\t\tdata:    chat.toJSON()\n\t\t})\n\t});\n}\n\nexport function Leave(client, options) {\n\tclient.__rooms.removeMember(options.chat.get('_id'), options.member);\n\n\tlet receivers = chat.get('members').concat(options.member),\n\t    sockets   = client.members.get(receivers);\n\n\tif (chat.systemMessages && chat.systemMessages.leaveMember) {\n\t\tclient.newSystemMessage(chat, {whoLeaved: member})\n\t\t\t.then((message) => {\n\t\t\t\tsockets.forEach((socket) => {\n\t\t\t\t\tthis.emitResult(socket, client.EVENTS.NEWSYSTEMMESSAGE, {\n\t\t\t\t\t\tmessage: 'New system message', data: message.toJSON(), chatId: chat.get('_id')\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t}\n\n\tsockets.forEach((socket) => {\n\t\tthis.emitResult(socket, client.EVENTS.LEAVE, {\n\t\t\tmessage: 'The member leaved',\n\t\t\tchatId:  chat.get('_id'),\n\t\t\tdata:    member\n\t\t});\n\t});\n}\n\nclass ClientResponse {\n\tconstructor(client) {\n\t\tthis.client = client;\n\n\t\tthis.emitResult.transform = function (data, next) {\n\t\t\tnext(data);\n\t\t};\n\n\t\tthis.emitError.transform = function (data, next) {\n\t\t\tnext(data);\n\t\t};\n\n\t\tthis.emitError.transformOn = (event, cb) => {\n\t\t\tif (!this.emitError.__transforms) {\n\t\t\t\tthis.emitError.__transforms = {}\n\t\t\t}\n\n\t\t\tif (!this.emitError.__transforms[event]) {\n\t\t\t\tthis.emitError.__transforms[event] = [];\n\t\t\t}\n\n\t\t\tthis.emitError.__transforms[event].push(cb);\n\n\t\t\treturn this.emitResult;\n\t\t};\n\n\t\tthis.emitResult.transformOn = (event, cb) => {\n\t\t\tif (!this.emitResult.__transforms) {\n\t\t\t\tthis.emitResult.__transforms = {}\n\t\t\t}\n\n\t\t\tif (!this.emitResult.__transforms[event]) {\n\t\t\t\tthis.emitResult.__transforms[event] = [];\n\t\t\t}\n\n\t\t\tthis.emitResult.__transforms[event].push(cb);\n\n\t\t\treturn this.emitResult;\n\t\t};\n\t}\n\n\temitError(socket, event, data) {\n\t\tvar index      = 0,\n\t\t    transforms = this.emitError.__transforms || {},\n\t\t    transformCb;\n\n\t\tfunction nextTransform(data) {\n\t\t\ttransformCb = transforms[event] ? transforms[event][index] : null;\n\n\t\t\tif (transformCb) {\n\t\t\t\ttransformCb(data, function (data) {\n\t\t\t\t\tindex++;\n\n\t\t\t\t\tif (transforms.length === index) {\n\t\t\t\t\t\tsocket.emit(event, {error: data});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextTransform(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsocket.emit(event, {error: data});\n\t\t\t}\n\t\t}\n\n\t\tthis.emitError.transform(data, (data) => {\n\t\t\tnextTransform(data);\n\t\t});\n\t}\n\n\temitResult(socket, event, data) {\n\t\tvar index      = 0,\n\t\t    transforms = this.emitResult.__transforms || {},\n\t\t    transformCb;\n\n\t\tfunction nextTransform(data) {\n\t\t\ttransformCb = transforms[event] ? transforms[event][index] : null;\n\n\t\t\tif (transformCb) {\n\t\t\t\ttransformCb(data, function (data) {\n\t\t\t\t\tindex++;\n\n\t\t\t\t\tif (transforms.length === index) {\n\t\t\t\t\t\tsocket.emit(event, {result: data});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextTransform(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsocket.emit(event, {result: data});\n\t\t\t}\n\t\t}\n\n\t\tthis.emitResult.transform(data, (data) => {\n\t\t\tnextTransform(data);\n\t\t});\n\t}\n\n\t// authenticate () {\n\t// \tclient.__members.add(socket.user, socket);\n\n\t// \tthis.emitResult(socket, 'login', { user: socket.user });\n\t// \tthis.emitResult(socket, 'authenticate', { user: socket.user });\n\t// }\n\n\tcreate(chat) {\n\t\tlet client = this;\n\n\t\tthis.emitResult(socket, client.EVENTS.CREATE, {message: 'Chat created', data: chat.toJSON()});\n\n\t\tclient.rooms.addMembers(\n\t\t\tchat.get('_id'),\n\t\t\tclient.__members.get(chat.get('members'))\n\t\t);\n\n\t\tclient.members.get(chat.get('members'))\n\t\t\t.forEach((socket) => {\n\t\t\t\tthis.emitResult(socket, client.EVENTS.JOIN, {\n\t\t\t\t\tmessage: 'Join to chat',\n\t\t\t\t\tdata:    chat.toJSON()\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tleave() {\n\t\tlet client = this;\n\n\t\tclient.__rooms.removeMember(chat.get('_id'), member);\n\n\t\tlet receivers = chat.get('members').concat(member),\n\t\t    sockets   = client.__members.get(receivers);\n\n\t\tif (chat.systemMessages && chat.systemMessages.leaveMember) {\n\t\t\tclient.newSystemMessage(chat, {whoLeaved: member})\n\t\t\t\t.then((message) => {\n\t\t\t\t\tsockets.forEach((socket) => {\n\t\t\t\t\t\tthis.emitResult(socket, client.EVENTS.NEWSYSTEMMESSAGE, {\n\t\t\t\t\t\t\tmessage: 'New system message', data: message.toJSON(), chatId: chat.get('_id')\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t}\n\n\t\tsockets.forEach((socket) => {\n\t\t\tthis.emitResult(socket, client.EVENTS.LEAVE, {\n\t\t\t\tmessage: 'The member leaved',\n\t\t\t\tdata:    member,\n\t\t\t\tchatId:  chat.get('_id')\n\t\t\t});\n\t\t});\n\t}\n\n\taddMember() {}\n\n\tfindMessagesLast() {}\n\n\tfindMessagesFrom() {}\n\n\tfindMessagesAt() {}\n\n\tfindChat() {}\n\n\tfindChats() {}\n\n\tchangeTitle() {}\n\n\tremoveMember(member, chat) {\n\t\tlet client = this;\n\n\t\tclient.__rooms.removeMember(chat.get('_id'), member);\n\n\t\tlet receivers = chat.get('members').concat(member),\n\t\t    sockets   = client.__members.get(receivers);\n\n\t\tif (chat.systemMessages && chat.systemMessages.removeMember) {\n\t\t\tclient.newSystemMessage(chat, {whoRemove: socket.user, whomRemove: member})\n\t\t\t\t.then((message) => {\n\t\t\t\t\tsockets.forEach((socket) => {\n\t\t\t\t\t\tthis.emitResult(socket, client.EVENTS.NEWMESSAGE, {\n\t\t\t\t\t\t\tmessage: 'New system message',\n\t\t\t\t\t\t\tdata:    message.toJSON(),\n\t\t\t\t\t\t\tchatId:  chat.get('_id')\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\tsockets.forEach((socket) => {\n\t\t\tthis.emitResult(socket, client.EVENTS.REMOVEMEMBER, {\n\t\t\t\tmessage: 'The member removed',\n\t\t\t\tdata:    member,\n\t\t\t\tchatId:  chat.get('_id')\n\t\t\t});\n\t\t});\n\t}\n\n\tnewMessage(message, chat) {\n\t\tlet client = this;\n\n\t\tclient.__members.get(chat.get('members'))\n\t\t\t.forEach((socket) => {\n\t\t\t\tthis.emitResult(socket, client.EVENTS.NEWMESSAGE, {\n\t\t\t\t\tmessage: 'New message',\n\t\t\t\t\tdata:    message.toJSON(),\n\t\t\t\t\tchatId:  chat.get('_id')\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport default new ClientResponse();"]}