{"version":3,"sources":["/home/demitriy/work/chat/lib/message.js"],"names":[],"mappings":"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","file":"message-compiled.js","sourcesContent":["'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x3, _x4, _x5) { var _again = true; _function: while (_again) { desc = parent = getter = undefined; _again = false; var object = _x3,\n    property = _x4,\n    receiver = _x5; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x3 = parent; _x4 = property; _x5 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\nvar _ = require('lodash'),\n    util = require('util'),\n    db = require('./db'),\n    Model = require('./model'),\n    SchemaLoader = require('./schema'),\n    schemaLoader = new SchemaLoader(),\n    schema = schemaLoader.load(__dirname + '/../schema/message.json');\n\nmodule.exports = function (options) {\n\tvar collectionName;\n\n\tcollectionName = options.collection || 'chats_messages';\n\n\tvar Message = (function (_Model) {\n\t\tfunction Message(props) {\n\t\t\t_classCallCheck(this, Message);\n\n\t\t\t_get(Object.getPrototypeOf(Message.prototype), 'constructor', this).call(this, props);\n\t\t\tthis.setSchema(schema);\n\n\t\t\tthis.on('beforeValidate', function () {\n\t\t\t\tif (!this.get('createdAt')) {\n\t\t\t\t\tthis.set('createdAt', new Date());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t_inherits(Message, _Model);\n\n\t\t_createClass(Message, [{\n\t\t\tkey: 'defaults',\n\t\t\tvalue: function defaults() {\n\t\t\t\treturn {\n\t\t\t\t\t_id: null,\n\t\t\t\t\tchatId: null,\n\t\t\t\t\ttext: '',\n\t\t\t\t\tcreatedAt: null,\n\t\t\t\t\tauthorId: null,\n\t\t\t\t\treceivers: [],\n\t\t\t\t\tattachments: [],\n\t\t\t\t\ttype: 'user'\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setAuthor',\n\t\t\tvalue: function setAuthor(id) {\n\t\t\t\tif (db.ObjectID.isValid(id)) {\n\t\t\t\t\tthis.set('authorId', id);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setChat',\n\t\t\tvalue: function setChat(chat) {\n\t\t\t\tif (chat) {\n\t\t\t\t\tthis.set('chatId', chat.get('_id'));\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setReceivers',\n\t\t\tvalue: function setReceivers(ids) {\n\t\t\t\tvar filteredIds;\n\n\t\t\t\tif (ids) {\n\t\t\t\t\tfilteredIds = ids.filter(function (id) {\n\t\t\t\t\t\treturn db.ObjectID.isValid(id);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.set('receivers', filteredIds);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'collection',\n\t\t\tvalue: function collection() {\n\t\t\t\treturn collectionName;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setSystemAuthor',\n\t\t\tvalue: function setSystemAuthor() {\n\t\t\t\tthis.setAuthor(new db.ObjectID(0));\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'stream',\n\t\t\tvalue: function stream() {\n\t\t\t\tvar criteria = arguments[0] === undefined ? {} : arguments[0];\n\t\t\t\tvar streamOptions = arguments[1] === undefined ? {} : arguments[1];\n\n\t\t\t\tvar cursor;\n\n\t\t\t\tcursor = db.connect().collection(collectionName).find(criteria).stream(streamOptions);\n\n\t\t\t\treturn cursor;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'findLast',\n\t\t\tvalue: function findLast(dataChatId, user, count) {\n\t\t\t\tvar chatId = db.ObjectId(dataChatId),\n\t\t\t\t    userId = db.ObjectId(user),\n\t\t\t\t    limit = Math.abs(count) > 50 ? 50 : Math.abs(count) || 10;\n\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tdb.getConnect(function (connect) {\n\t\t\t\t\t\tconnect.collection(collectionName).find({ chatId: chatId, receivers: userId }).limit(limit).toArray(function (error, result) {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treturn reject(error);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'findFrom',\n\t\t\tvalue: function findFrom(dataChatId, dataMessageId, user, count) {\n\t\t\t\tvar chatId = db.ObjectId(dataChatId),\n\t\t\t\t    messageId = db.ObjectId(dataMessageId),\n\t\t\t\t    userId = db.ObjectId(user),\n\t\t\t\t    limit = Math.abs(count) > 50 ? 50 : Math.abs(count) || 10;\n\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tdb.getConnect(function (connect) {\n\t\t\t\t\t\tconnect.collection(collectionName).find({ _id: { $gt: messageId }, chatId: chatId, receivers: userId }).limit(limit).toArray(function (error, result) {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treturn reject(error);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'findAt',\n\t\t\tvalue: function findAt(dataChatId, dataMessageId, user, count) {\n\t\t\t\tvar chatId = db.ObjectId(dataChatId),\n\t\t\t\t    messageId = db.ObjectId(dataMessageId),\n\t\t\t\t    userId = db.ObjectId(user),\n\t\t\t\t    limit = Math.abs(count) > 50 ? 50 : Math.abs(count) || 10;\n\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tdb.getConnect(function (connect) {\n\t\t\t\t\t\tconnect.collection(collectionName).find({ _id: { $lt: messageId }, chatId: chatId, receivers: userId }).limit(limit).toArray(function (error, result) {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treturn reject(error);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}]);\n\n\t\treturn Message;\n\t})(Model);\n\n\treturn Message;\n};"]}