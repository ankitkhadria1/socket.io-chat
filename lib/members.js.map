{"version":3,"sources":["../src/members.es6"],"names":[],"mappings":";;;;;AAAA,MAAM,MAAM,SAAS,KAAK,CAAC;AAC1B,YAAW,GAAa;MAAZ,MAAM,yDAAG,CAAC;;AACrB,OAAK,CAAC,MAAM,CAAC,CAAC;EACd;CACD;;AAED,MAAM,OAAO,CAAC;AACb,YAAW,GAAG;AACb,MAAI,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;EAC3B;;AAED,IAAG,CAAC,EAAE,EAAE,MAAM,EAAE;AACf,MAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE;AACpC,OAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC;GAC7C;;AAED,MAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAE5C,SAAO,IAAI,CAAC;EACZ;;AAED,OAAM,CAAC,EAAE,EAAE,MAAM,EAAE;AAClB,MAAI,MAAM,EAAE,WAAW,CAAC;;AAExB,MAAI,MAAM,EAAE;AACX,SAAM,GAAQ,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;;AAE7C,OAAI,MAAM,EAAE;AACX,eAAW,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACrC,UAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;;AAE9B,QAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,SAAI,CAAC,SAAS,UAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;KAClC;IACD;GACD,MAAM;AACN,OAAI,CAAC,SAAS,UAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;GAClC;;AAED,SAAO,IAAI,CAAC;EACZ;;AAED,IAAG,CAAC,EAAE,EAAE;;;AACP,MAAI,GAAG,EAAE,MAAM,CAAC;;AAEhB,MAAI,EAAE,YAAY,KAAK,EAAE;AACxB,MAAG,GAAG,EAAE,CAAC;;AAET,KAAE,CAAC,OAAO,CAAC,UAAC,EAAE,EAAK;AAClB,UAAM,GAAG,MAAK,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AACxC,UAAM,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;AAC1C,WAAM,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC3B,CAAC,CAAC;IACH,CAAC,CAAC;;AAEH,UAAO,GAAG,CAAC;GACX,MAAM;AACN,UAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;GACtC;EACD;;AAED,SAAQ,CAAC,EAAE,EAAE;AACZ,SAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;EACnF;CACD;;qBAEc,OAAO","file":"members.js","sourcesContent":["class Member extends Array {\n\tconstructor(length = 0) {\n\t\tsuper(length);\n\t}\n}\n\nclass Members {\n\tconstructor() {\n\t\tthis.__members = new Map();\n\t}\n\n\tadd(id, socket) {\n\t\tif (!this.__members.has(String(id))) {\n\t\t\tthis.__members.set(String(id), new Member());\n\t\t}\n\n\t\tthis.__members.get(String(id)).push(socket);\n\n\t\treturn this;\n\t}\n\n\tremove(id, socket) {\n\t\tvar member, socketIndex;\n\n\t\tif (socket) {\n\t\t\tmember      = this.__members.get(String(id));\n\n\t\t\tif (member) {\n\t\t\t\tsocketIndex = member.indexOf(socket);\n\t\t\t\tmember.splice(socketIndex, 1);\n\n\t\t\t\tif (member.length === 0) {\n\t\t\t\t\tthis.__members.delete(String(id));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.__members.delete(String(id));\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tget(id) {\n\t\tvar res, member;\n\n\t\tif (id instanceof Array) {\n\t\t\tres = [];\n\n\t\t\tid.forEach((id) => {\n\t\t\t\tmember = this.__members.get(String(id));\n\t\t\t\tmember && member.forEach(function (socket) {\n\t\t\t\t\tsocket && res.push(socket);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn res;\n\t\t} else {\n\t\t\treturn this.__members.get(String(id));\n\t\t}\n\t}\n\n\tisOnline(id) {\n\t\treturn this.__members.has(String(id)) && this.__members.get(String(id)).length > 0;\n\t}\n}\n\nexport default Members;"]}