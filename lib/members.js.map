{"version":3,"sources":["../src/members.es6"],"names":[],"mappings":";;AAAA,AAAC,CAAA,YAAY;AACZ,aAAY,CAAC;;AAEb,OAAM,MAAM,SAAS,KAAK,CAAC;AAC1B,aAAW,GAAU;AACpB,QAAK,4BAAS,CAAC;GACf;EACD;;AAED,OAAM,OAAO,CAAC;AACb,aAAW,GAAG;AACb,OAAI,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;GAC3B;;AAED,KAAG,CAAC,EAAE,EAAE,MAAM,EAAE;AACf,OAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE;AACpC,QAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC;IAC7C;;AAED,OAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAE5C,UAAO,IAAI,CAAC;GACZ;;AAED,QAAM,CAAC,EAAE,EAAE,MAAM,EAAE;AAClB,OAAI,MAAM,EAAE,WAAW,CAAC;;AAExB,OAAI,MAAM,EAAE;AACX,UAAM,GAAQ,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;;AAE7C,QAAI,MAAM,EAAE;AACX,gBAAW,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACrC,WAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;;AAE9B,SAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,UAAI,CAAC,SAAS,UAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;MAClC;KACD;IACD,MAAM;AACN,QAAI,CAAC,SAAS,UAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;IAClC;;AAED,UAAO,IAAI,CAAC;GACZ;;AAED,KAAG,CAAC,EAAE,EAAE;;;AACP,OAAI,GAAG,EAAE,MAAM,CAAC;;AAEhB,OAAI,EAAE,YAAY,KAAK,EAAE;AACxB,OAAG,GAAG,EAAE,CAAC;;AAET,MAAE,CAAC,OAAO,CAAC,UAAC,EAAE,EAAK;AAClB,WAAM,GAAG,MAAK,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AACxC,WAAM,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;AAC1C,YAAM,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;MAC3B,CAAC,CAAC;KACH,CAAC,CAAC;;AAEH,WAAO,GAAG,CAAC;IACX,MAAM;AACN,WAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;IACtC;GACD;;AAED,UAAQ,CAAC,EAAE,EAAE;AACZ,UAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;GACnF;EACD;;AAED,OAAM,CAAC,OAAO,GAAG,OAAO,CAAC;CACzB,CAAA,EAAE,CAAE","file":"members.js","sourcesContent":["(function () {\n\t'use strict';\n\n\tclass Member extends Array {\n\t\tconstructor(...args) {\n\t\t\tsuper(...args);\n\t\t}\n\t}\n\n\tclass Members {\n\t\tconstructor() {\n\t\t\tthis.__members = new Map();\n\t\t}\n\n\t\tadd(id, socket) {\n\t\t\tif (!this.__members.has(String(id))) {\n\t\t\t\tthis.__members.set(String(id), new Member());\n\t\t\t}\n\n\t\t\tthis.__members.get(String(id)).push(socket);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tremove(id, socket) {\n\t\t\tvar member, socketIndex;\n\n\t\t\tif (socket) {\n\t\t\t\tmember      = this.__members.get(String(id));\n\n\t\t\t\tif (member) {\n\t\t\t\t\tsocketIndex = member.indexOf(socket);\n\t\t\t\t\tmember.splice(socketIndex, 1);\n\n\t\t\t\t\tif (member.length === 0) {\n\t\t\t\t\t\tthis.__members.delete(String(id));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.__members.delete(String(id));\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tget(id) {\n\t\t\tvar res, member;\n\n\t\t\tif (id instanceof Array) {\n\t\t\t\tres = [];\n\n\t\t\t\tid.forEach((id) => {\n\t\t\t\t\tmember = this.__members.get(String(id));\n\t\t\t\t\tmember && member.forEach(function (socket) {\n\t\t\t\t\t\tsocket && res.push(socket);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn res;\n\t\t\t} else {\n\t\t\t\treturn this.__members.get(String(id));\n\t\t\t}\n\t\t}\n\n\t\tisOnline(id) {\n\t\t\treturn this.__members.has(String(id)) && this.__members.get(String(id)).length > 0;\n\t\t}\n\t}\n\n\tmodule.exports = Members;\n}());"]}