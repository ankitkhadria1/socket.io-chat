{"version":3,"sources":["../../src/models/message.es6"],"names":[],"mappings":";;;;;;;;0BAAyB,gBAAgB;;;;sBAChB,WAAW;;;;qBAErB,UAAU,MAAM,EAAgB;KAAd,OAAO,yDAAG,EAAE;;AAC5C,KAAI,MAAM,GAAG,oBAAa,IAAI,CAAC,SAAS,CAAC,CAAC;AAC1C,KAAI,EAAE,GAAO,MAAM,CAAC,EAAE,CAAC;;AAEvB,KAAI,CAAC,OAAO,CAAC,cAAc,EAAE,OAAO,CAAC,cAAc,GAAG,eAAe,CAAC;;AAEtE,OAAM,OAAO,iCAAe;AAC3B,aAAW,GAAY;OAAX,IAAI,yDAAG,EAAE;;AACpB,QAAK,CAAC,IAAI,CAAC,CAAC;;AAEZ,QAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;GAC1B;;AAED,SAAO,CAAC,IAAI,EAAE;AACb,OAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;AACpC,OAAI,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,UAAU,MAAM,EAAE;AAAE,WAAO,MAAM,CAAC,GAAG,CAAC;IAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;;AAErG,UAAO,IAAI,CAAC;GACZ;;AAED,WAAS,CAAC,IAAI,EAAE;AACf,OAAI,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEnC,UAAO,IAAI,CAAC;GACZ;;AAED,SAAO,CAAC,IAAI,EAAE;AACb,OAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;AAEvB,UAAO,IAAI,CAAC;GACZ;;AAED,SAAO,UAAU,GAAG;AAAE,UAAO,OAAO,CAAC,cAAc,CAAC;GAAE;AACtD,SAAO,EAAE,GAAG;AAAE,UAAO,EAAE,CAAC;GAAE;AAC1B,SAAO,MAAM,GAAG;AAAE,UAAO,MAAM,CAAC;GAAE;;AAElC,YAAU,GAAG;AAAE,UAAO,OAAO,CAAC,cAAc,CAAC;GAAE;AAC/C,IAAE,GAAG;AAAE,UAAO,EAAE,CAAC;GAAE;AACnB,QAAM,GAAG;AAAE,UAAO,MAAM,CAAC;GAAE;EAC3B;;;;AAID,QAAO,OAAO,CAAC;CACf;;AAAA,CAAC","file":"message.js","sourcesContent":["import Model        from '../model/index';\nimport SchemaLoader from '../schema';\n\nexport default function (client, options = {}) {\n\tlet schema = SchemaLoader.load('message');\n\tlet db     = client.db;\n\n\tif (!options.collectionName) options.collectionName = 'chat_messages';\n\n\tclass Message extends Model {\n\t\tconstructor(data = {}) {\n\t\t\tsuper(data);\n\n\t\t\tsuper.initialize(options);\n\t\t}\n\n\t\tsetChat(chat) {\n\t\t\tthis.set('chatId', chat.get('_id'));\n\t\t\tthis.set('receivers', chat.get('members').map(function (member) { return member._id; }).map(String));\n\n\t\t\treturn this;\n\t\t}\n\n\t\tsetAuthor(user) {\n\t\t\tthis.set('authorId', String(user));\n\n\t\t\treturn this;\n\t\t}\n\n\t\tsetType(type) {\n\t\t\tthis.set('type', type);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tstatic collection() { return options.collectionName; }\n\t\tstatic db() { return db; }\n\t\tstatic schema() { return schema; }\n\n\t\tcollection() { return options.collectionName; }\n\t\tdb() { return db; }\n\t\tschema() { return schema; }\n\t}\n\n\t//Model.ensureIndex(Message);\n\n\treturn Message;\n};"]}